var L=Object.defineProperty;var I=(a,v)=>L(a,"name",{value:v,configurable:!0});import{J as F,d as y,f as R,a as M,K as j,j as E,L as B,n as h,M as K}from"./vue.esm-bundler.442e6891.js";import{m as $,y as U,h as V,F as _,o as m,c as W,u as q,l as D,P,t as w,b as H,p as J,R as O,x as Q,a as S,d as p,v as G,M as C,D as A,O as X}from"./use-outside-click.ddd972c3.js";function Y({container:a,accept:v,walk:b,enabled:f}){F(()=>{let e=a.value;if(!e||f!==void 0&&!f.value)return;let d=$(a);if(!d)return;let u=Object.assign(r=>v(r),{acceptNode:v}),c=d.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,u,!1);for(;c.nextNode();)b(c.currentNode)})}I(Y,"p");var z=(a=>(a[a.Open=0]="Open",a[a.Closed=1]="Closed",a))(z||{}),Z=(a=>(a[a.Pointer=0]="Pointer",a[a.Other=1]="Other",a))(Z||{});function ee(a){requestAnimationFrame(()=>requestAnimationFrame(a))}I(ee,"Y");let N=Symbol("MenuContext");function T(a){let v=K(N,null);if(v===null){let b=new Error(`<${a} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(b,T),b}return v}I(T,"D");let le=y({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(a,{slots:v,attrs:b}){let f=R(1),e=R(null),d=R(null),u=R([]),c=R(""),r=R(null),g=R(1);function s(o=n=>n){let n=r.value!==null?u.value[r.value]:null,l=X(o(u.value.slice()),x=>m(x.dataRef.domRef)),i=n?l.indexOf(n):null;return i===-1&&(i=null),{items:l,activeItemIndex:i}}I(s,"i");let t={menuState:f,buttonRef:e,itemsRef:d,items:u,searchQuery:c,activeItemIndex:r,activationTrigger:g,closeMenu:()=>{f.value=1,r.value=null},openMenu:()=>f.value=0,goToItem(o,n,l){let i=s(),x=Q(o===S.Specific?{focus:S.Specific,id:n}:{focus:o},{resolveItems:()=>i.items,resolveActiveIndex:()=>i.activeItemIndex,resolveId:k=>k.id,resolveDisabled:k=>k.dataRef.disabled});c.value="",r.value=x,g.value=l??1,u.value=i.items},search(o){let n=c.value!==""?0:1;c.value+=o.toLowerCase();let l=(r.value!==null?u.value.slice(r.value+n).concat(u.value.slice(0,r.value+n)):u.value).find(x=>x.dataRef.textValue.startsWith(c.value)&&!x.dataRef.disabled),i=l?u.value.indexOf(l):-1;i===-1||i===r.value||(r.value=i,g.value=1)},clearSearch(){c.value=""},registerItem(o,n){let l=s(i=>[...i,{id:o,dataRef:n}]);u.value=l.items,r.value=l.activeItemIndex,g.value=1},unregisterItem(o){let n=s(l=>{let i=l.findIndex(x=>x.id===o);return i!==-1&&l.splice(i,1),l});u.value=n.items,r.value=n.activeItemIndex,g.value=1}};return U([e,d],(o,n)=>{var l;t.closeMenu(),V(n,_.Loose)||(o.preventDefault(),(l=m(e))==null||l.focus())},M(()=>f.value===0)),j(N,t),W(M(()=>q(f.value,{[0]:D.Open,[1]:D.Closed}))),()=>{let o={open:f.value===0,close:t.closeMenu};return P({ourProps:{},theirProps:a,slot:o,slots:v,attrs:b,name:"Menu"})}}}),ue=y({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"}},setup(a,{attrs:v,slots:b,expose:f}){let e=T("MenuButton"),d=`headlessui-menu-button-${w()}`;f({el:e.buttonRef,$el:e.buttonRef});function u(s){switch(s.key){case p.Space:case p.Enter:case p.ArrowDown:s.preventDefault(),s.stopPropagation(),e.openMenu(),h(()=>{var t;(t=m(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(S.First)});break;case p.ArrowUp:s.preventDefault(),s.stopPropagation(),e.openMenu(),h(()=>{var t;(t=m(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(S.Last)});break}}I(u,"u");function c(s){switch(s.key){case p.Space:s.preventDefault();break}}I(c,"m");function r(s){a.disabled||(e.menuState.value===0?(e.closeMenu(),h(()=>{var t;return(t=m(e.buttonRef))==null?void 0:t.focus({preventScroll:!0})})):(s.preventDefault(),e.openMenu(),ee(()=>{var t;return(t=m(e.itemsRef))==null?void 0:t.focus({preventScroll:!0})})))}I(r,"c");let g=H(M(()=>({as:a.as,type:v.type})),e.buttonRef);return()=>{var s;let t={open:e.menuState.value===0},o={ref:e.buttonRef,id:d,type:g.value,"aria-haspopup":!0,"aria-controls":(s=m(e.itemsRef))==null?void 0:s.id,"aria-expanded":a.disabled?void 0:e.menuState.value===0,onKeydown:u,onKeyup:c,onClick:r};return P({ourProps:o,theirProps:a,slot:t,attrs:v,slots:b,name:"MenuButton"})}}}),oe=y({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(a,{attrs:v,slots:b,expose:f}){let e=T("MenuItems"),d=`headlessui-menu-items-${w()}`,u=R(null);f({el:e.itemsRef,$el:e.itemsRef}),Y({container:M(()=>m(e.itemsRef)),enabled:M(()=>e.menuState.value===0),accept(t){return t.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:t.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(t){t.setAttribute("role","none")}});function c(t){var o;switch(u.value&&clearTimeout(u.value),t.key){case p.Space:if(e.searchQuery.value!=="")return t.preventDefault(),t.stopPropagation(),e.search(t.key);case p.Enter:if(t.preventDefault(),t.stopPropagation(),e.activeItemIndex.value!==null){let n=e.items.value[e.activeItemIndex.value];(o=m(n.dataRef.domRef))==null||o.click()}e.closeMenu(),A(m(e.buttonRef));break;case p.ArrowDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(S.Next);case p.ArrowUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(S.Previous);case p.Home:case p.PageUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(S.First);case p.End:case p.PageDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(S.Last);case p.Escape:t.preventDefault(),t.stopPropagation(),e.closeMenu(),h(()=>{var n;return(n=m(e.buttonRef))==null?void 0:n.focus({preventScroll:!0})});break;case p.Tab:t.preventDefault(),t.stopPropagation(),e.closeMenu(),h(()=>G(m(e.buttonRef),t.shiftKey?C.Previous:C.Next));break;default:t.key.length===1&&(e.search(t.key),u.value=setTimeout(()=>e.clearSearch(),350));break}}I(c,"m");function r(t){switch(t.key){case p.Space:t.preventDefault();break}}I(r,"c");let g=J(),s=M(()=>g!==null?g.value===D.Open:e.menuState.value===0);return()=>{var t,o;let n={open:e.menuState.value===0},l={"aria-activedescendant":e.activeItemIndex.value===null||(t=e.items.value[e.activeItemIndex.value])==null?void 0:t.id,"aria-labelledby":(o=m(e.buttonRef))==null?void 0:o.id,id:d,onKeydown:c,onKeyup:r,role:"menu",tabIndex:0,ref:e.itemsRef};return P({ourProps:l,theirProps:a,slot:n,attrs:v,slots:b,features:O.RenderStrategy|O.Static,visible:s.value,name:"MenuItems"})}}}),re=y({name:"MenuItem",props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1}},setup(a,{slots:v,attrs:b,expose:f}){let e=T("MenuItem"),d=`headlessui-menu-item-${w()}`,u=R(null);f({el:u,$el:u});let c=M(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===d:!1),r=M(()=>({disabled:a.disabled,textValue:"",domRef:u}));E(()=>{var n,l;let i=(l=(n=m(u))==null?void 0:n.textContent)==null?void 0:l.toLowerCase().trim();i!==void 0&&(r.value.textValue=i)}),E(()=>e.registerItem(d,r)),B(()=>e.unregisterItem(d)),F(()=>{e.menuState.value===0&&(!c.value||e.activationTrigger.value!==0&&h(()=>{var n,l;return(l=(n=m(u))==null?void 0:n.scrollIntoView)==null?void 0:l.call(n,{block:"nearest"})}))});function g(n){if(a.disabled)return n.preventDefault();e.closeMenu(),A(m(e.buttonRef))}I(g,"I");function s(){if(a.disabled)return e.goToItem(S.Nothing);e.goToItem(S.Specific,d)}I(s,"i");function t(){a.disabled||c.value||e.goToItem(S.Specific,d,0)}I(t,"t$1");function o(){a.disabled||!c.value||e.goToItem(S.Nothing)}return I(o,"r"),()=>{let{disabled:n}=a,l={active:c.value,disabled:n,close:e.closeMenu};return P({ourProps:{id:d,ref:u,role:"menuitem",tabIndex:n===!0?void 0:-1,"aria-disabled":n===!0?!0:void 0,onClick:g,onFocus:s,onPointermove:t,onMousemove:t,onPointerleave:o,onMouseleave:o},theirProps:a,slot:l,attrs:b,slots:v,name:"MenuItem"})}}});export{ue as I,re as S,oe as g,le as v};
//# sourceMappingURL=menu.8804da07.js.map
