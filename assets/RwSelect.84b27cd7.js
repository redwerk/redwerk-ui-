var se=Object.defineProperty;var g=(t,o)=>se(t,"name",{value:o,configurable:!0});import{d as B,f as k,a as y,K as ue,h as W,F as Z,j as U,Q as re,C as de,L as ve,n as I,M as pe,U as _,o as F,b as E,w as A,r as T,v as $,W as K,l as G,t as ce,x as z,u as w,G as N,H,O as fe,P as J,I as be,q as me,E as ge,T as ye}from"./vue.esm-bundler.6cad9f43.js";import{b as Se}from"./index.b199dee7.js";import X from"./RwIcon.1fbc6944.js";import{P as q,u as D,o as O,c as xe,l as Q,V as he,w as ee,t as M,b as Oe,p as we,R as Y,a as x}from"./use-resolve-button-type.1a2e5f2b.js";import{x as Ve,a as V,y as Re,h as Le,F as Pe,O as ke}from"./use-outside-click.5c175611.js";var te=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(te||{});let _e=B({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(t,{slots:o,attrs:i}){return()=>{let{features:s,...e}=t,d={"aria-hidden":(s&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return q({ourProps:d,theirProps:e,slot:{},attrs:i,slots:o,name:"Hidden"})}}});function le(t={},o=null,i=[]){for(let[s,e]of Object.entries(t))ie(i,ae(o,s),e);return i}g(le,"e");function ae(t,o){return t?t+"["+o+"]":o}g(ae,"s");function ie(t,o,i){if(Array.isArray(i))for(let[s,e]of i.entries())ie(t,ae(o,s.toString()),e);else i instanceof Date?t.push([o,i.toISOString()]):typeof i=="boolean"?t.push([o,i?"1":"0"]):typeof i=="string"?t.push([o,i]):typeof i=="number"?t.push([o,`${i}`]):i==null?t.push([o,""]):le(i,o,t)}g(ie,"f");function Te(t,o,i){let s=k(i==null?void 0:i.value),e=y(()=>t.value!==void 0);return[y(()=>e.value?t.value:s.value),function(d){return e.value||(s.value=d),o==null?void 0:o(d)}]}g(Te,"d");function Ie(t,o){return t===o}g(Ie,"ue");var De=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(De||{}),Be=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(Be||{}),Ce=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Ce||{});function Fe(t){requestAnimationFrame(()=>requestAnimationFrame(t))}g(Fe,"fe");let ne=Symbol("ListboxContext");function j(t){let o=pe(ne,null);if(o===null){let i=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,j),i}return o}g(j,"V");let qe=B({name:"Listbox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Ie},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:o,attrs:i,emit:s}){let e=k(1),d=k(null),c=k(null),h=k(null),p=k([]),n=k(""),l=k(null),a=k(1);function m(u=r=>r){let r=l.value!==null?p.value[l.value]:null,v=ke(u(p.value.slice()),L=>O(L.dataRef.domRef)),b=r?v.indexOf(r):null;return b===-1&&(b=null),{options:v,activeOptionIndex:b}}g(m,"k");let R=y(()=>t.multiple?1:0),[P,f]=Te(y(()=>t.modelValue),u=>s("update:modelValue",u),y(()=>t.defaultValue)),S={listboxState:e,value:P,mode:R,compare(u,r){if(typeof t.by=="string"){let v=t.by;return(u==null?void 0:u[v])===(r==null?void 0:r[v])}return t.by(u,r)},orientation:y(()=>t.horizontal?"horizontal":"vertical"),labelRef:d,buttonRef:c,optionsRef:h,disabled:y(()=>t.disabled),options:p,searchQuery:n,activeOptionIndex:l,activationTrigger:a,closeListbox(){t.disabled||e.value!==1&&(e.value=1,l.value=null)},openListbox(){t.disabled||e.value!==0&&(e.value=0)},goToOption(u,r,v){if(t.disabled||e.value===1)return;let b=m(),L=Ve(u===V.Specific?{focus:V.Specific,id:r}:{focus:u},{resolveItems:()=>b.options,resolveActiveIndex:()=>b.activeOptionIndex,resolveId:C=>C.id,resolveDisabled:C=>C.dataRef.disabled});n.value="",l.value=L,a.value=v??1,p.value=b.options},search(u){if(t.disabled||e.value===1)return;let r=n.value!==""?0:1;n.value+=u.toLowerCase();let v=(l.value!==null?p.value.slice(l.value+r).concat(p.value.slice(0,l.value+r)):p.value).find(L=>L.dataRef.textValue.startsWith(n.value)&&!L.dataRef.disabled),b=v?p.value.indexOf(v):-1;b===-1||b===l.value||(l.value=b,a.value=1)},clearSearch(){t.disabled||e.value!==1&&n.value!==""&&(n.value="")},registerOption(u,r){let v=m(b=>[...b,{id:u,dataRef:r}]);p.value=v.options,l.value=v.activeOptionIndex},unregisterOption(u){let r=m(v=>{let b=v.findIndex(L=>L.id===u);return b!==-1&&v.splice(b,1),v});p.value=r.options,l.value=r.activeOptionIndex,a.value=1},select(u){t.disabled||f(D(R.value,{[0]:()=>u,[1]:()=>{let r=_(S.value.value).slice(),v=_(u),b=r.findIndex(L=>S.compare(v,_(L)));return b===-1?r.push(v):r.splice(b,1),r}}))}};return Re([c,h],(u,r)=>{var v;S.closeListbox(),Le(r,Pe.Loose)||(u.preventDefault(),(v=O(c))==null||v.focus())},y(()=>e.value===0)),ue(ne,S),xe(y(()=>D(e.value,{[0]:Q.Open,[1]:Q.Closed}))),()=>{let{name:u,modelValue:r,disabled:v,...b}=t,L={open:e.value===0,disabled:v,value:P.value};return W(Z,[...u!=null&&P.value!=null?le({[u]:P.value}).map(([C,oe])=>W(_e,he({features:te.Hidden,key:C,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:C,value:oe}))):[],q({ourProps:{},theirProps:{...i,...ee(b,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:L,slots:o,attrs:i,name:"Listbox"})])}}}),Ae=B({name:"ListboxLabel",props:{as:{type:[Object,String],default:"label"}},setup(t,{attrs:o,slots:i}){let s=j("ListboxLabel"),e=`headlessui-listbox-label-${M()}`;function d(){var c;(c=O(s.buttonRef))==null||c.focus({preventScroll:!0})}return g(d,"p"),()=>{let c={open:s.listboxState.value===0,disabled:s.disabled.value},h={id:e,ref:s.labelRef,onClick:d};return q({ourProps:h,theirProps:t,slot:c,attrs:o,slots:i,name:"ListboxLabel"})}}}),Ne=B({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"}},setup(t,{attrs:o,slots:i,expose:s}){let e=j("ListboxButton"),d=`headlessui-listbox-button-${M()}`;s({el:e.buttonRef,$el:e.buttonRef});function c(l){switch(l.key){case x.Space:case x.Enter:case x.ArrowDown:l.preventDefault(),e.openListbox(),I(()=>{var a;(a=O(e.optionsRef))==null||a.focus({preventScroll:!0}),e.value.value||e.goToOption(V.First)});break;case x.ArrowUp:l.preventDefault(),e.openListbox(),I(()=>{var a;(a=O(e.optionsRef))==null||a.focus({preventScroll:!0}),e.value.value||e.goToOption(V.Last)});break}}g(c,"s");function h(l){switch(l.key){case x.Space:l.preventDefault();break}}g(h,"O");function p(l){e.disabled.value||(e.listboxState.value===0?(e.closeListbox(),I(()=>{var a;return(a=O(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})})):(l.preventDefault(),e.openListbox(),Fe(()=>{var a;return(a=O(e.optionsRef))==null?void 0:a.focus({preventScroll:!0})})))}g(p,"d");let n=Oe(y(()=>({as:t.as,type:o.type})),e.buttonRef);return()=>{var l,a;let m={open:e.listboxState.value===0,disabled:e.disabled.value,value:e.value.value},R={ref:e.buttonRef,id:d,type:n.value,"aria-haspopup":!0,"aria-controls":(l=O(e.optionsRef))==null?void 0:l.id,"aria-expanded":e.disabled.value?void 0:e.listboxState.value===0,"aria-labelledby":e.labelRef.value?[(a=O(e.labelRef))==null?void 0:a.id,d].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:c,onKeyup:h,onClick:p};return q({ourProps:R,theirProps:t,slot:m,attrs:o,slots:i,name:"ListboxButton"})}}}),je=B({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(t,{attrs:o,slots:i,expose:s}){let e=j("ListboxOptions"),d=`headlessui-listbox-options-${M()}`,c=k(null);s({el:e.optionsRef,$el:e.optionsRef});function h(l){switch(c.value&&clearTimeout(c.value),l.key){case x.Space:if(e.searchQuery.value!=="")return l.preventDefault(),l.stopPropagation(),e.search(l.key);case x.Enter:if(l.preventDefault(),l.stopPropagation(),e.activeOptionIndex.value!==null){let a=e.options.value[e.activeOptionIndex.value];e.select(a.dataRef.value)}e.mode.value===0&&(e.closeListbox(),I(()=>{var a;return(a=O(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})}));break;case D(e.orientation.value,{vertical:x.ArrowDown,horizontal:x.ArrowRight}):return l.preventDefault(),l.stopPropagation(),e.goToOption(V.Next);case D(e.orientation.value,{vertical:x.ArrowUp,horizontal:x.ArrowLeft}):return l.preventDefault(),l.stopPropagation(),e.goToOption(V.Previous);case x.Home:case x.PageUp:return l.preventDefault(),l.stopPropagation(),e.goToOption(V.First);case x.End:case x.PageDown:return l.preventDefault(),l.stopPropagation(),e.goToOption(V.Last);case x.Escape:l.preventDefault(),l.stopPropagation(),e.closeListbox(),I(()=>{var a;return(a=O(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})});break;case x.Tab:l.preventDefault(),l.stopPropagation();break;default:l.key.length===1&&(e.search(l.key),c.value=setTimeout(()=>e.clearSearch(),350));break}}g(h,"O");let p=we(),n=y(()=>p!==null?p.value===Q.Open:e.listboxState.value===0);return()=>{var l,a,m,R;let P={open:e.listboxState.value===0},f={"aria-activedescendant":e.activeOptionIndex.value===null||(l=e.options.value[e.activeOptionIndex.value])==null?void 0:l.id,"aria-multiselectable":e.mode.value===1?!0:void 0,"aria-labelledby":(R=(a=O(e.labelRef))==null?void 0:a.id)!=null?R:(m=O(e.buttonRef))==null?void 0:m.id,"aria-orientation":e.orientation.value,id:d,onKeydown:h,role:"listbox",tabIndex:0,ref:e.optionsRef};return q({ourProps:f,theirProps:t,slot:P,attrs:o,slots:i,features:Y.RenderStrategy|Y.Static,visible:n.value,name:"ListboxOptions"})}}}),Ee=B({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(t,{slots:o,attrs:i,expose:s}){let e=j("ListboxOption"),d=`headlessui-listbox-option-${M()}`,c=k(null);s({el:c,$el:c});let h=y(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===d:!1),p=y(()=>D(e.mode.value,{[0]:()=>e.compare(_(e.value.value),_(t.value)),[1]:()=>_(e.value.value).some(f=>e.compare(_(f),_(t.value)))})),n=y(()=>D(e.mode.value,{[1]:()=>{var f;let S=_(e.value.value);return((f=e.options.value.find(u=>S.some(r=>e.compare(_(r),_(u.dataRef.value)))))==null?void 0:f.id)===d},[0]:()=>p.value})),l=y(()=>({disabled:t.disabled,value:t.value,textValue:"",domRef:c}));U(()=>{var f,S;let u=(S=(f=O(c))==null?void 0:f.textContent)==null?void 0:S.toLowerCase().trim();u!==void 0&&(l.value.textValue=u)}),U(()=>e.registerOption(d,l)),re(()=>e.unregisterOption(d)),U(()=>{de([e.listboxState,p],()=>{e.listboxState.value===0&&(!p.value||D(e.mode.value,{[1]:()=>{n.value&&e.goToOption(V.Specific,d)},[0]:()=>{e.goToOption(V.Specific,d)}}))},{immediate:!0})}),ve(()=>{e.listboxState.value===0&&(!h.value||e.activationTrigger.value!==0&&I(()=>{var f,S;return(S=(f=O(c))==null?void 0:f.scrollIntoView)==null?void 0:S.call(f,{block:"nearest"})}))});function a(f){if(t.disabled)return f.preventDefault();e.select(t.value),e.mode.value===0&&(e.closeListbox(),I(()=>{var S;return(S=O(e.buttonRef))==null?void 0:S.focus({preventScroll:!0})}))}g(a,"i");function m(){if(t.disabled)return e.goToOption(V.Nothing);e.goToOption(V.Specific,d)}g(m,"k");function R(){t.disabled||h.value||e.goToOption(V.Specific,d,0)}g(R,"h");function P(){t.disabled||!h.value||e.goToOption(V.Nothing)}return g(P,"w$1"),()=>{let{disabled:f}=t,S={active:h.value,selected:p.value,disabled:f},u={id:d,ref:c,role:"option",tabIndex:f===!0?void 0:-1,"aria-disabled":f===!0?!0:void 0,"aria-selected":p.value,disabled:void 0,onClick:a,onFocus:m,onPointermove:R,onMousemove:R,onPointerleave:P,onMouseleave:P};return q({ourProps:u,theirProps:ee(t,["value","disabled"]),slot:S,attrs:i,slots:o,name:"ListboxOption"})}}});const ze={key:0},He=B({__name:"RwSelect",props:{modelValue:null,items:{default:()=>[]},itemValue:{default:void 0},itemTitle:{default:void 0},disabledItems:{default:()=>[]},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:o}){const i=t,s=Se(i,"modelValue",o),e=g(n=>l=>l===void 0?n:n[l],"getProp"),d=y(()=>i.items.map((n,l)=>{const a=i.itemValue instanceof Function?i.itemValue(n):e(n)(i.itemValue),m=i.itemTitle instanceof Function?i.itemTitle(n):e(n)(i.itemTitle);return{item:n,value:a,title:m,isSelected:a===s.value,isDisabled:Boolean(i.disabledItems[l])}})),c=y(()=>s.value===null?null:d.value.find(n=>n.isSelected)),h=y(()=>{var n;return((n=c.value)==null?void 0:n.title)||null}),p=y(()=>{var n;return((n=c.value)==null?void 0:n.item)||null});return(n,l)=>(F(),E(w(qe),{class:"rw-select",modelValue:w(s),"onUpdate:modelValue":l[0]||(l[0]=a=>ge(s)?s.value=a:null),multiple:t.multiple,disabled:t.disabled,as:"div"},{default:A(({open:a})=>[T(n.$slots,"labelSlot",N(H({open:a,disabled:t.disabled})),()=>[$(w(Ae),{class:z(["rw-select__label",{"rw-select__label__open":a,"rw-select__label__disabled":t.disabled}])},{default:A(()=>[T(n.$slots,"default"),K(),t.required?(F(),G("span",ze," * ")):ce("",!0)]),_:2},1032,["class"])]),T(n.$slots,"activatorSlot",N(H({value:w(s),item:w(p),open:a})),()=>[$(w(Ne),{class:z(["rw-select__button",{"rw-select__button__active":a}])},{default:A(()=>[w(h)?T(n.$slots,"selectedSlot",N(fe({key:0},{value:w(s),item:w(p),open:a})),()=>[K(J(w(h)),1)]):T(n.$slots,"placeholderSlot",{key:1}),T(n.$slots,"iconSlot",N(H({value:w(s),item:w(p),open:a})),()=>[a?(F(),E(X,{key:1,name:"mdi:chevron-up"})):(F(),E(X,{key:0,name:"mdi:chevron-down"}))])]),_:2},1032,["class"])]),be($(w(je),{static:"",class:z(["rw-select__list",{"rw-select__list__active":a}])},{default:A(()=>[(F(!0),G(Z,null,me(w(d),(m,R)=>(F(),E(w(Ee),{class:z(["rw-select__list-item",{"rw-select__list-item__focused":n.active,"rw-select__list-item__selected":n.selected,"rw-select__list-item__disabled":t.disabled||m.isDisabled}]),key:R,value:m.value,disabled:t.disabled||m.isDisabled},{default:A(({active:P,selected:f})=>[T(n.$slots,"itemSlot",N(H({item:m.item,active:P,selected:f,disabled:t.disabled||m.isDisabled})),()=>[K(J(m.title),1)])]),_:2},1032,["class","value","disabled"]))),128))]),_:2},1032,["class"]),[[ye,a]])]),_:3},8,["modelValue","multiple","disabled"]))}});He.__docgenInfo={exportName:"default",displayName:"RwSelect",description:"",tags:{},props:[{name:"modelValue",required:!0,type:{name:"any"}},{name:"items",required:!1,type:{name:"Array",elements:[{name:"any"}]},defaultValue:{func:!1,value:"() => []"}},{name:"itemValue",required:!1,type:{name:"union",elements:[{name:"string"},{name:"ParseFunction"}]},defaultValue:{func:!1,value:"undefined"}},{name:"itemTitle",required:!1,type:{name:"union",elements:[{name:"string"},{name:"ParseFunction"}]},defaultValue:{func:!1,value:"undefined"}},{name:"disabledItems",required:!1,type:{name:"Array",elements:[{name:"number"}]},defaultValue:{func:!1,value:"() => []"}},{name:"multiple",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"disabled",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"required",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"update:modelValue",type:{names:["unknown"]}}],slots:[{name:"labelSlot",scoped:!0,bindings:[{name:"open",title:"binding"},{name:"disabled",title:"binding"}]},{name:"default"},{name:"activatorSlot",scoped:!0,bindings:[{name:"value",title:"binding"},{name:"item",title:"binding"},{name:"open",title:"binding"}]},{name:"selectedSlot",scoped:!0,bindings:[{name:"value",title:"binding"},{name:"item",title:"binding"},{name:"open",title:"binding"}]},{name:"placeholderSlot"},{name:"iconSlot",scoped:!0,bindings:[{name:"value",title:"binding"},{name:"item",title:"binding"},{name:"open",title:"binding"}]},{name:"itemSlot",scoped:!0,bindings:[{name:"item",title:"binding"},{name:"active",title:"binding"},{name:"selected",title:"binding"},{name:"disabled",title:"binding"}]}]};export{He as default};
//# sourceMappingURL=RwSelect.84b27cd7.js.map
