var D=Object.defineProperty;var c=(e,u)=>D(e,"name",{value:u,configurable:!0});import{f,n as L,g as O,d as C,a as I,i as _,j as A,k as F,o as w,l as B,m as h,p as P,u as r,r as V,q as k,F as K,t as T,v as $,x as W}from"./vue.esm-bundler.7d3de5e1.js";import{R as q}from"./index.b4664809.js";import{u as H,a as N}from"./index.66d5fb4e.js";import"./iframe.70e4d47a.js";const U={pauseOnHover:!0,delay:5e3};function X(e){const u=f();f(0);function l(){const d={...U};return typeof e.props.autoplay=="object"&&(d.delay=e.props.autoplay.delay??d.delay,d.pauseOnHover=e.props.autoplay.pauseOnHover??d.pauseOnHover),d}c(l,"getOptions");function n(){if(!e.props.autoplay)return;const d=l();u.value=setInterval(()=>{},d.delay)}c(n,"startAutoplay");function v(){u.value&&clearInterval(u.value),u.value=void 0}return c(v,"stopAutoplay"),{startAutoplay:n,stopAutoplay:v}}c(X,"useAutoplay");function Y({scrollerElementRef:e,props:u,itemElementWidth:l}){const n=f(""),v=f([]),d=f(!1),y=f(0),s=f(!1);function b(i){!e.value||(u.vertical?e.value.style.overflowY=i:e.value.style.overflowX=i)}c(b,"setOverflow");function g(i){if(!e.value)return;s.value=!0;const t=e.value.querySelector(`.rw-carousel-item[data-slide='${i}']`);t==null||t.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),setTimeout(()=>{s.value=!1},1e3)}c(g,"scrollToSlideByKey");const m=H(()=>{if(!e.value)return;const i=[...e.value.querySelectorAll('.rw-carousel-item[data-visible="true"]')];v.value=i.map(o=>o.dataset.slide);const t=Math.floor(i.length/2),a=i.length&&i[t].dataset.slide;n.value=a||""},100);function S(i,t){!e.value||(b("hidden"),e.value.style.scrollBehavior="auto",e.value.scroll({top:i,left:t}),setTimeout(()=>{e.value&&(b("auto"),e.value.style.scrollBehavior="smooth")},10))}c(S,"scrollTo");async function x(i){if(!e.value)return;const t=i.offsetWidth+i.scrollPosition,a=i.contentWidth-l.value;if(d.value=t>=a,u.infinite&&d.value&&(e.value.style.scrollBehavior="auto"),await L(),!s.value&&u.infinite&&!i.scrollPosition){const o=u.vertical?i.contentWidth-i.offsetWidth-50:0,M=u.vertical?0:i.contentWidth-i.offsetWidth-l.value;S(o,M)}else!s.value&&u.infinite&&t>=i.contentWidth&&t>y.value&&S(10,10);y.value=i.scrollPosition}c(x,"scroll");async function p(){if(!e.value)return;const i=u.vertical?{offsetWidth:e.value.offsetHeight,scrollPosition:e.value.scrollTop,contentWidth:e.value.scrollHeight}:{offsetWidth:e.value.offsetWidth,scrollPosition:e.value.scrollLeft,contentWidth:e.value.scrollWidth};await x(i),m()}return c(p,"onScrollEvent"),{onScrollEvent:p,scrollToSlideByKey:g,firstVisibleSlideKey:n,visibleSlidesKeys:v,detectFirstVisibleSlide:m}}c(Y,"useScroll");function j({scrollerElementRef:e,props:u}){const l=f(),n=f();function v(s){l.value=s}c(v,"registerRef");function d(){n.value&&n.value.stop(),u.infinite&&(n.value=N(l,([{isIntersecting:s}])=>{if(!s||!e.value)return;const b=e.value.querySelectorAll(".rw-carousel-item");l.value&&(l.value.innerHTML=b[0].innerHTML,l.value.classList.remove(...l.value.classList),l.value.classList.add(...b[0].classList))}))}c(d,"startIntersection");function y(){n.value&&n.value.stop(),n.value=void 0}return c(y,"stopIntersection"),{startIntersection:d,registerRef:v,stopIntersection:y}}c(j,"useLastSlideIntersection");function z({scrollerElementRef:e,props:u}){const l=O({top:0,left:0,x:0,y:0}),n=f(!1);function v(s){if(!u.scrollByDrag||!n.value||!e.value)return;const b=s.clientX-l.x,g=s.clientY-l.y;e.value.scrollTop=l.top-g,e.value.scrollLeft=l.left-b}c(v,"onMouseMove");function d(){!u.scrollByDrag||!e.value||(e.value.style.cursor="grab",e.value.style.removeProperty("user-select"),e.value.style.scrollSnapType=u.vertical?"y mandatory":"x mandatory",e.value.style.scrollBehavior="smooth",n.value=!1)}c(d,"onMouseUp");function y(s){!u.scrollByDrag||!e.value||(l.left=e.value.scrollLeft,l.top=e.value.scrollTop,l.x=s.clientX,l.y=s.clientY,e.value.style.cursor="grabbing",e.value.style.userSelect="none",e.value.style.scrollSnapType="none",e.value.style.scrollBehavior="auto",n.value=!0)}return c(y,"onMouseDown"),{onMouseMove:v,onMouseUp:d,onMouseDown:y}}c(z,"useMouseEvents");const G={class:"rw-carousel__container"},J={class:"btn prev"},Q={class:"btn next"},Z={class:"rw-carousel__bottom"},R={key:0,class:"dots"},E=["title","onClick"],ee=C({__name:"RwCarousel",props:{vertical:{type:Boolean,default:!1},infinite:{type:Boolean,default:!1},showScroll:{type:Boolean,default:!1},autoplay:{type:[Boolean,null],default:!1},maxVisible:{default:void 0},notVisibleOffset:{default:void 0},showDots:{type:Boolean,default:!0},showButtons:{type:Boolean,default:!0},scrollByDrag:{type:Boolean,default:!0}},setup(e,{expose:u}){const l=e,n=f(),v=I(()=>{var a,o;return typeof window>"u"||!n.value?0:(l.vertical?(a=n.value.querySelector(".rw-carousel-item"))==null?void 0:a.clientHeight:(o=n.value.querySelector(".rw-carousel-item"))==null?void 0:o.clientWidth)||0}),d=_(),y=I(()=>{const t=(d==null?void 0:d.default())||[];return t.length?(t[0].children||[]).map(o=>`slide-${o.key}`):[]}),s=Y({props:l,itemElementWidth:v,scrollerElementRef:n}),b=I(()=>y.value.findIndex(t=>s.firstVisibleSlideKey.value===t)),g=j({props:l,scrollerElementRef:n});function m(){var a,o;const t=s.visibleSlidesKeys.value.length===1?v.value+v.value/3:v.value;l.vertical?(a=n.value)==null||a.scrollBy(0,t):(o=n.value)==null||o.scrollBy(t,0)}c(m,"next");function S(){var a,o;const t=s.visibleSlidesKeys.value.length===1?v.value+v.value/3:v.value;l.vertical?(a=n.value)==null||a.scrollBy(0,-t):(o=n.value)==null||o.scrollBy(-t,0)}c(S,"previous");const x=X({props:l,nextSlideFn:m,prevSlideFn:S}),p=z({props:l,scrollerElementRef:n}),i=I(()=>{const t=l.notVisibleOffset||"0px",a=l.maxVisible?`calc((100% / ${l.maxVisible}) - ${t})`:"auto",o=l.scrollByDrag?"grab":"auto";return l.vertical?{width:"100%",gridAutoRows:a,cursor:o}:{gridAutoColumns:a,cursor:o}});return A(()=>{var t;x.startAutoplay(),(t=n.value)==null||t.addEventListener("scroll",s.onScrollEvent),s.detectFirstVisibleSlide(),g.startIntersection()}),F(()=>{var t;x.stopAutoplay(),(t=n.value)==null||t.removeEventListener("scroll",s.onScrollEvent),g.stopIntersection()}),u({next:m,previous:S}),(t,a)=>(w(),B("div",{class:W(["rw-carousel",{vertical:e.vertical,"hide-scrollbar":!e.showScroll}])},[h("div",G,[h("div",{class:"scroller",style:P(r(i)),ref_key:"scrollerElementRef",ref:n,onMousemove:a[0]||(a[0]=(...o)=>r(p).onMouseMove&&r(p).onMouseMove(...o)),onMouseup:a[1]||(a[1]=(...o)=>r(p).onMouseUp&&r(p).onMouseUp(...o)),onMousedown:a[2]||(a[2]=(...o)=>r(p).onMouseDown&&r(p).onMouseDown(...o)),onMouseout:a[3]||(a[3]=(...o)=>r(p).onMouseUp&&r(p).onMouseUp(...o))},[V(t.$slots,"default",{activeItemIndex:r(b)}),e.infinite&&r(s).visibleSlidesKeys.value.length>1?(w(),B("div",{key:0,class:"rw-carousel-item",ref:r(g).registerRef},null,512)):k("",!0)],36),e.showButtons?(w(),B(K,{key:0},[h("div",J,[V(t.$slots,"prevButtonSlot",{click:S},()=>[h("button",{type:"button",title:"Previous slide",onClick:S},[T(r(q),{name:"mdi:chevron-left"})])])]),h("div",Q,[V(t.$slots,"nextButtonSlot",{click:m},()=>[h("button",{type:"button",title:"Next slide",onClick:m},[T(r(q),{name:"mdi:chevron-right"})])])])],64)):k("",!0)]),h("div",Z,[V(t.$slots,"bottomSlot",{previous:S,next:m,scrollTo:r(s).scrollToSlideByKey,slidesKeys:r(y),activeSlideKey:r(s).firstVisibleSlideKey.value},()=>[e.showDots?(w(),B("div",R,[(w(!0),B(K,null,$(r(y),(o,M)=>V(t.$slots,"dotSlot",{key:o,slideNumber:M+1,slideKey:o,click:()=>r(s).scrollToSlideByKey(o),active:o===r(s).firstVisibleSlideKey.value},()=>[h("button",{class:W(["dots__item",{active:o===r(s).firstVisibleSlideKey.value}]),type:"button",title:`Slide #${M+1}`,onClick:te=>r(s).scrollToSlideByKey(o)},null,10,E)])),128))])):k("",!0)])])],2))}});ee.__docgenInfo={exportName:"default",displayName:"RwCarousel",description:"",tags:{},expose:[{name:"next"},{name:"previous"}],props:[{name:"vertical",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"infinite",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"showScroll",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"autoplay",required:!1,type:{name:"union",elements:[{name:"boolean"},{name:"RwCarouselAutoplayOptions"}]},defaultValue:{func:!1,value:"false"}},{name:"maxVisible",required:!1,type:{name:"number"},defaultValue:{func:!1,value:"undefined"}},{name:"notVisibleOffset",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"showDots",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"showButtons",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"scrollByDrag",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}}],slots:[{name:"default",scoped:!0,bindings:[{name:"active-item-index",title:"binding"}]},{name:"prevButtonSlot",scoped:!0,bindings:[{name:"click",title:"binding"}]},{name:"nextButtonSlot",scoped:!0,bindings:[{name:"click",title:"binding"}]},{name:"bottomSlot",scoped:!0,bindings:[{name:"previous",title:"binding"},{name:"next",title:"binding"},{name:"scroll-to",title:"binding"},{name:"slides-keys",title:"binding"},{name:"active-slide-key",title:"binding"}]},{name:"dotSlot",scoped:!0,bindings:[{name:"slide-number",title:"binding"},{name:"slide-key",title:"binding"},{name:"click",title:"binding"},{name:"active",title:"binding"}]}]};export{ee as default};
//# sourceMappingURL=RwCarousel.a92aa2ac.js.map
