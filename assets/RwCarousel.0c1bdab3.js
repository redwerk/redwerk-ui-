var H=Object.defineProperty;var v=(e,r)=>H(e,"name",{value:r,configurable:!0});import{f as p,n as N,g as U,d as X,a as x,i as Y,j,k as z,o as h,l as V,m as g,p as $,u as s,F as A,q as K,b as O,t as I,r as T,v as _,x as C}from"./vue.esm-bundler.598ec8ba.js";import{_ as F}from"./RwCarouselItemMock.158c0221.js";import{R as P}from"./index.59beaf35.js";import{u as G,a as J}from"./index.283ab726.js";import"./iframe.1095ffe7.js";const Q={pauseOnHover:!0,delay:5e3};function Z(e){const r=p();p(0);function t(){const a={...Q};return typeof e.props.autoplay=="object"&&(a.delay=e.props.autoplay.delay??a.delay,a.pauseOnHover=e.props.autoplay.pauseOnHover??a.pauseOnHover),a}v(t,"getOptions");function l(){if(!e.props.autoplay)return;const a=t();r.value=setInterval(()=>{},a.delay)}v(l,"startAutoplay");function d(){r.value&&clearInterval(r.value),r.value=void 0}return v(d,"stopAutoplay"),{startAutoplay:l,stopAutoplay:d}}v(Z,"useAutoplay");function E({scrollerElementRef:e,props:r,itemElementWidth:t,slidesKeys:l}){const d=p(""),a=p([]),m=p(!1),y=p(0),u=p(!1),w=p(new Array(l.value.length)),B=p([]);function S(i){!e.value||(r.vertical?e.value.style.overflowY=i:e.value.style.overflowX=i)}v(S,"setOverflow");function k(i){if(!e.value)return;u.value=!0;const f=e.value.querySelector(`.rw-carousel-item[data-slide='${i}']`);f==null||f.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),setTimeout(()=>{u.value=!1},1e3)}v(k,"scrollToSlideByKey");function q(){if(!e.value)return;const i=[...e.value.querySelectorAll('.rw-carousel-item-mock[data-visible="true"]')];B.value=i.map(f=>f.dataset.slide)}v(q,"detectVisibleMockSlides");function b(){if(!e.value)return;const i=[...e.value.querySelectorAll('.rw-carousel-item[data-visible="true"]')];a.value=i.map(f=>f.dataset.slide),w.value=new Array(Math.ceil(a.value.length/2))}v(b,"detectVisibleSlides");const W=G(()=>{if(!e.value)return;b(),q();const i=Math.floor((a.value.length-1)/2),f=a.value.length&&l.value[0]===a.value[0],D=a.value.length&&l.value[l.value.length-1]===a.value[a.value.length-1],L=w.value.length===B.value.length;let M="";f&&L?M=l.value[0]:D&&L?M=l.value[l.value.length-1]:M=a.value[i]||"",d.value=M||""},200);function n(i,f){!e.value||(S("hidden"),e.value.style.scrollBehavior="auto",e.value.scroll({top:i,left:f}),setTimeout(()=>{e.value&&(S("auto"),e.value.style.scrollBehavior="smooth")},10))}v(n,"scrollTo");async function c(i){if(!e.value)return;const f=i.offsetWidth+i.scrollPosition,D=i.contentWidth-t.value;if(m.value=f>=D,r.infinite&&m.value&&(e.value.style.scrollBehavior="auto"),await N(),!u.value&&r.infinite&&!i.scrollPosition){const L=r.vertical?i.contentWidth-i.offsetWidth-50:0,M=r.vertical?0:i.contentWidth-i.offsetWidth-t.value;n(L,M)}else!u.value&&r.infinite&&f>=i.contentWidth&&f>y.value&&n(10,10);y.value=i.scrollPosition}v(c,"scroll");async function o(){if(!e.value)return;const i=r.vertical?{offsetWidth:e.value.offsetHeight,scrollPosition:e.value.scrollTop,contentWidth:e.value.scrollHeight}:{offsetWidth:e.value.offsetWidth,scrollPosition:e.value.scrollLeft,contentWidth:e.value.scrollWidth};await c(i),W()}return v(o,"onScrollEvent"),{onScrollEvent:o,scrollToSlideByKey:k,firstVisibleSlideKey:d,visibleSlidesKeys:a,detectFirstVisibleSlide:W,mockSlides:w,visibleMockSlidesKeys:B}}v(E,"useScroll");function R({scrollerElementRef:e,props:r}){const t=p(),l=p();function d(y){t.value=y}v(d,"registerRef");function a(){l.value&&l.value.stop(),r.infinite&&(l.value=J(t,([{isIntersecting:y}])=>{if(!y||!e.value)return;const u=e.value.querySelectorAll(".rw-carousel-item");t.value&&(t.value.innerHTML=u[0].innerHTML,t.value.classList.remove(...t.value.classList),t.value.classList.add(...u[0].classList))}))}v(a,"startIntersection");function m(){l.value&&l.value.stop(),l.value=void 0}return v(m,"stopIntersection"),{startIntersection:a,registerRef:d,stopIntersection:m}}v(R,"useLastSlideIntersection");function ee({scrollerElementRef:e,props:r}){const t=U({top:0,left:0,x:0,y:0}),l=p(!1);function d(y){if(!r.scrollByDrag||!l.value||!e.value)return;const u=y.clientX-t.x,w=y.clientY-t.y;e.value.scrollTop=t.top-w,e.value.scrollLeft=t.left-u}v(d,"onMouseMove");function a(){!r.scrollByDrag||!e.value||(e.value.style.cursor="grab",e.value.style.removeProperty("user-select"),e.value.style.scrollSnapType=r.vertical?"y mandatory":"x mandatory",e.value.style.scrollBehavior="smooth",l.value=!1)}v(a,"onMouseUp");function m(y){!r.scrollByDrag||!e.value||(t.left=e.value.scrollLeft,t.top=e.value.scrollTop,t.x=y.clientX,t.y=y.clientY,e.value.style.cursor="grabbing",e.value.style.userSelect="none",e.value.style.scrollSnapType="none",e.value.style.scrollBehavior="auto",l.value=!0)}return v(m,"onMouseDown"),{onMouseMove:d,onMouseUp:a,onMouseDown:m}}v(ee,"useMouseEvents");const te={class:"rw-carousel__container"},le={class:"btn prev"},oe={class:"btn next"},ie={class:"rw-carousel__bottom"},ne={key:0,class:"dots"},ae=["title","onClick"],se=X({__name:"RwCarousel",props:{vertical:{type:Boolean,default:!1},infinite:{type:Boolean,default:!1},showScroll:{type:Boolean,default:!1},autoplay:{type:[Boolean,null],default:!1},maxVisible:{default:void 0},notVisibleOffset:{default:void 0},showDots:{type:Boolean,default:!0},showButtons:{type:Boolean,default:!0},scrollByDrag:{type:Boolean,default:!0},showMockSlides:{type:Boolean,default:!1}},setup(e,{expose:r}){const t=e,l=p(),d=x(()=>{var c,o;return typeof window>"u"||!l.value?0:(t.vertical?(c=l.value.querySelector(".rw-carousel-item"))==null?void 0:c.clientHeight:(o=l.value.querySelector(".rw-carousel-item"))==null?void 0:o.clientWidth)||0}),a=Y(),m=x(()=>{const n=(a==null?void 0:a.default({activeItemIndex:0}))||[];return n.length?(n[0].children||[]).map(o=>`slide-${o.key}`):[]}),y=x(()=>t.vertical?{height:`${d.value}px`}:{width:`${d.value}px`}),u=E({props:t,itemElementWidth:d,scrollerElementRef:l,slidesKeys:m}),w=x(()=>m.value.findIndex(n=>u.firstVisibleSlideKey.value===n)),B=R({props:t,scrollerElementRef:l});function S(){var c,o;const n=u.visibleSlidesKeys.value.length===1?d.value+d.value/3:d.value;t.vertical?(c=l.value)==null||c.scrollBy(0,n):(o=l.value)==null||o.scrollBy(n,0)}v(S,"next");function k(){var c,o;const n=u.visibleSlidesKeys.value.length===1?d.value+d.value/3:d.value;t.vertical?(c=l.value)==null||c.scrollBy(0,-n):(o=l.value)==null||o.scrollBy(-n,0)}v(k,"previous");const q=Z({props:t,nextSlideFn:S,prevSlideFn:k}),b=ee({props:t,scrollerElementRef:l}),W=x(()=>{const n=t.notVisibleOffset||"0px",c=t.maxVisible?`calc((100% / ${t.maxVisible}) - ${n})`:"auto",o=t.scrollByDrag?"grab":"auto";return t.vertical?{width:"100%",gridAutoRows:c,cursor:o}:{gridAutoColumns:c,cursor:o}});return j(()=>{var n;q.startAutoplay(),(n=l.value)==null||n.addEventListener("scroll",u.onScrollEvent),u.detectFirstVisibleSlide(),B.startIntersection()}),z(()=>{var n;q.stopAutoplay(),(n=l.value)==null||n.removeEventListener("scroll",u.onScrollEvent),B.stopIntersection()}),r({next:S,previous:k}),(n,c)=>(h(),V("div",{class:C(["rw-carousel",{vertical:e.vertical,"hide-scrollbar":!e.showScroll}])},[g("div",te,[g("div",{class:"scroller",style:$(s(W)),ref_key:"scrollerElementRef",ref:l,onMousemove:c[0]||(c[0]=(...o)=>s(b).onMouseMove&&s(b).onMouseMove(...o)),onMouseup:c[1]||(c[1]=(...o)=>s(b).onMouseUp&&s(b).onMouseUp(...o)),onMousedown:c[2]||(c[2]=(...o)=>s(b).onMouseDown&&s(b).onMouseDown(...o)),onMouseout:c[3]||(c[3]=(...o)=>s(b).onMouseUp&&s(b).onMouseUp(...o))},[e.showMockSlides?(h(!0),V(A,{key:0},K(s(u).mockSlides.value,(o,i)=>(h(),O(F,{key:i,style:$(s(y))},null,8,["style"]))),128)):I("",!0),T(n.$slots,"default",{activeItemIndex:s(w)}),e.infinite&&s(u).visibleSlidesKeys.value.length>1?(h(),V("div",{key:1,class:"rw-carousel-item",ref:s(B).registerRef},null,512)):I("",!0),e.showMockSlides?(h(!0),V(A,{key:2},K(s(u).mockSlides.value,(o,i)=>(h(),O(F,{key:i,style:$(s(y))},null,8,["style"]))),128)):I("",!0)],36),e.showButtons?(h(),V(A,{key:0},[g("div",le,[T(n.$slots,"prevButtonSlot",{click:k},()=>[g("button",{type:"button",title:"Previous slide",onClick:k},[_(s(P),{name:"mdi:chevron-left"})])])]),g("div",oe,[T(n.$slots,"nextButtonSlot",{click:S},()=>[g("button",{type:"button",title:"Next slide",onClick:S},[_(s(P),{name:"mdi:chevron-right"})])])])],64)):I("",!0)]),g("div",ie,[T(n.$slots,"bottomSlot",{previous:k,next:S,scrollTo:s(u).scrollToSlideByKey,slidesKeys:s(m),activeSlideKey:s(u).firstVisibleSlideKey.value},()=>[e.showDots?(h(),V("div",ne,[(h(!0),V(A,null,K(s(m),(o,i)=>T(n.$slots,"dotSlot",{key:o,slideNumber:i+1,slideKey:o,click:()=>s(u).scrollToSlideByKey(o),active:o===s(u).firstVisibleSlideKey.value},()=>[g("button",{class:C(["dots__item",{active:o===s(u).firstVisibleSlideKey.value}]),type:"button",title:`Slide #${i+1}`,onClick:f=>s(u).scrollToSlideByKey(o)},null,10,ae)])),128))])):I("",!0)])])],2))}});se.__docgenInfo={exportName:"default",displayName:"RwCarousel",description:"",tags:{},expose:[{name:"next"},{name:"previous"}],props:[{name:"vertical",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"infinite",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"showScroll",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"autoplay",required:!1,type:{name:"union",elements:[{name:"boolean"},{name:"RwCarouselAutoplayOptions"}]},defaultValue:{func:!1,value:"false"}},{name:"maxVisible",required:!1,type:{name:"number"},defaultValue:{func:!1,value:"undefined"}},{name:"notVisibleOffset",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"showDots",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"showButtons",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"scrollByDrag",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"showMockSlides",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],slots:[{name:"default",scoped:!0,bindings:[{name:"active-item-index",title:"binding"}]},{name:"prevButtonSlot",scoped:!0,bindings:[{name:"click",title:"binding"}]},{name:"nextButtonSlot",scoped:!0,bindings:[{name:"click",title:"binding"}]},{name:"bottomSlot",scoped:!0,bindings:[{name:"previous",title:"binding"},{name:"next",title:"binding"},{name:"scroll-to",title:"binding"},{name:"slides-keys",title:"binding"},{name:"active-slide-key",title:"binding"}]},{name:"dotSlot",scoped:!0,bindings:[{name:"slide-number",title:"binding"},{name:"slide-key",title:"binding"},{name:"click",title:"binding"},{name:"active",title:"binding"}]}]};export{se as default};
//# sourceMappingURL=RwCarousel.0c1bdab3.js.map
