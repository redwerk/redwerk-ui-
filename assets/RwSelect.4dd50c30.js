var se=Object.defineProperty;var m=(t,o)=>se(t,"name",{value:o,configurable:!0});import{d as B,f as _,a as g,J as ue,h as Q,F as Z,j as U,N as re,C as de,K as ve,n as I,L as pe,T as k,o as F,b as E,w as q,r as T,t as $,U as K,l as G,q as ce,x as z,u as w,E as A,G as H,W as fe,O as J,H as be,v as me,D as ge,S as ye}from"./vue.esm-bundler.7d3de5e1.js";import{b as Se}from"./index.66d5fb4e.js";import X from"./RwIcon.4debc3af.js";import{P as N,u as D,o as O,c as xe,l as W,V as he,w as ee,t as M,b as Oe,p as we,R as Y,a as x}from"./use-resolve-button-type.6832d112.js";import{x as Ve,a as V,y as Re,h as Le,F as Pe,O as _e}from"./use-outside-click.36bc2faf.js";var te=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(te||{});let ke=B({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(t,{slots:o,attrs:i}){return()=>{let{features:s,...e}=t,d={"aria-hidden":(s&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return N({ourProps:d,theirProps:e,slot:{},attrs:i,slots:o,name:"Hidden"})}}});function le(t={},o=null,i=[]){for(let[s,e]of Object.entries(t))ie(i,ae(o,s),e);return i}m(le,"e");function ae(t,o){return t?t+"["+o+"]":o}m(ae,"s");function ie(t,o,i){if(Array.isArray(i))for(let[s,e]of i.entries())ie(t,ae(o,s.toString()),e);else i instanceof Date?t.push([o,i.toISOString()]):typeof i=="boolean"?t.push([o,i?"1":"0"]):typeof i=="string"?t.push([o,i]):typeof i=="number"?t.push([o,`${i}`]):i==null?t.push([o,""]):le(i,o,t)}m(ie,"f");function Te(t,o,i){let s=_(i==null?void 0:i.value),e=g(()=>t.value!==void 0);return[g(()=>e.value?t.value:s.value),function(d){return e.value||(s.value=d),o==null?void 0:o(d)}]}m(Te,"d");function Ie(t,o){return t===o}m(Ie,"ue");var De=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(De||{}),Be=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(Be||{}),Ce=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Ce||{});function Fe(t){requestAnimationFrame(()=>requestAnimationFrame(t))}m(Fe,"fe");let ne=Symbol("ListboxContext");function j(t){let o=pe(ne,null);if(o===null){let i=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,j),i}return o}m(j,"V");let Ne=B({name:"Listbox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Ie},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:o,attrs:i,emit:s}){let e=_(1),d=_(null),c=_(null),h=_(null),p=_([]),n=_(""),l=_(null),a=_(1);function y(u=r=>r){let r=l.value!==null?p.value[l.value]:null,v=_e(u(p.value.slice()),L=>O(L.dataRef.domRef)),b=r?v.indexOf(r):null;return b===-1&&(b=null),{options:v,activeOptionIndex:b}}m(y,"k");let R=g(()=>t.multiple?1:0),[P,f]=Te(g(()=>t.modelValue),u=>s("update:modelValue",u),g(()=>t.defaultValue)),S={listboxState:e,value:P,mode:R,compare(u,r){if(typeof t.by=="string"){let v=t.by;return(u==null?void 0:u[v])===(r==null?void 0:r[v])}return t.by(u,r)},orientation:g(()=>t.horizontal?"horizontal":"vertical"),labelRef:d,buttonRef:c,optionsRef:h,disabled:g(()=>t.disabled),options:p,searchQuery:n,activeOptionIndex:l,activationTrigger:a,closeListbox(){t.disabled||e.value!==1&&(e.value=1,l.value=null)},openListbox(){t.disabled||e.value!==0&&(e.value=0)},goToOption(u,r,v){if(t.disabled||e.value===1)return;let b=y(),L=Ve(u===V.Specific?{focus:V.Specific,id:r}:{focus:u},{resolveItems:()=>b.options,resolveActiveIndex:()=>b.activeOptionIndex,resolveId:C=>C.id,resolveDisabled:C=>C.dataRef.disabled});n.value="",l.value=L,a.value=v??1,p.value=b.options},search(u){if(t.disabled||e.value===1)return;let r=n.value!==""?0:1;n.value+=u.toLowerCase();let v=(l.value!==null?p.value.slice(l.value+r).concat(p.value.slice(0,l.value+r)):p.value).find(L=>L.dataRef.textValue.startsWith(n.value)&&!L.dataRef.disabled),b=v?p.value.indexOf(v):-1;b===-1||b===l.value||(l.value=b,a.value=1)},clearSearch(){t.disabled||e.value!==1&&n.value!==""&&(n.value="")},registerOption(u,r){let v=y(b=>[...b,{id:u,dataRef:r}]);p.value=v.options,l.value=v.activeOptionIndex},unregisterOption(u){let r=y(v=>{let b=v.findIndex(L=>L.id===u);return b!==-1&&v.splice(b,1),v});p.value=r.options,l.value=r.activeOptionIndex,a.value=1},select(u){t.disabled||f(D(R.value,{[0]:()=>u,[1]:()=>{let r=k(S.value.value).slice(),v=k(u),b=r.findIndex(L=>S.compare(v,k(L)));return b===-1?r.push(v):r.splice(b,1),r}}))}};return Re([c,h],(u,r)=>{var v;S.closeListbox(),Le(r,Pe.Loose)||(u.preventDefault(),(v=O(c))==null||v.focus())},g(()=>e.value===0)),ue(ne,S),xe(g(()=>D(e.value,{[0]:W.Open,[1]:W.Closed}))),()=>{let{name:u,modelValue:r,disabled:v,...b}=t,L={open:e.value===0,disabled:v,value:P.value};return Q(Z,[...u!=null&&P.value!=null?le({[u]:P.value}).map(([C,oe])=>Q(ke,he({features:te.Hidden,key:C,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:C,value:oe}))):[],N({ourProps:{},theirProps:{...i,...ee(b,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:L,slots:o,attrs:i,name:"Listbox"})])}}}),qe=B({name:"ListboxLabel",props:{as:{type:[Object,String],default:"label"}},setup(t,{attrs:o,slots:i}){let s=j("ListboxLabel"),e=`headlessui-listbox-label-${M()}`;function d(){var c;(c=O(s.buttonRef))==null||c.focus({preventScroll:!0})}return m(d,"p"),()=>{let c={open:s.listboxState.value===0,disabled:s.disabled.value},h={id:e,ref:s.labelRef,onClick:d};return N({ourProps:h,theirProps:t,slot:c,attrs:o,slots:i,name:"ListboxLabel"})}}}),Ae=B({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"}},setup(t,{attrs:o,slots:i,expose:s}){let e=j("ListboxButton"),d=`headlessui-listbox-button-${M()}`;s({el:e.buttonRef,$el:e.buttonRef});function c(l){switch(l.key){case x.Space:case x.Enter:case x.ArrowDown:l.preventDefault(),e.openListbox(),I(()=>{var a;(a=O(e.optionsRef))==null||a.focus({preventScroll:!0}),e.value.value||e.goToOption(V.First)});break;case x.ArrowUp:l.preventDefault(),e.openListbox(),I(()=>{var a;(a=O(e.optionsRef))==null||a.focus({preventScroll:!0}),e.value.value||e.goToOption(V.Last)});break}}m(c,"s");function h(l){switch(l.key){case x.Space:l.preventDefault();break}}m(h,"O");function p(l){e.disabled.value||(e.listboxState.value===0?(e.closeListbox(),I(()=>{var a;return(a=O(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})})):(l.preventDefault(),e.openListbox(),Fe(()=>{var a;return(a=O(e.optionsRef))==null?void 0:a.focus({preventScroll:!0})})))}m(p,"d");let n=Oe(g(()=>({as:t.as,type:o.type})),e.buttonRef);return()=>{var l,a;let y={open:e.listboxState.value===0,disabled:e.disabled.value,value:e.value.value},R={ref:e.buttonRef,id:d,type:n.value,"aria-haspopup":!0,"aria-controls":(l=O(e.optionsRef))==null?void 0:l.id,"aria-expanded":e.disabled.value?void 0:e.listboxState.value===0,"aria-labelledby":e.labelRef.value?[(a=O(e.labelRef))==null?void 0:a.id,d].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:c,onKeyup:h,onClick:p};return N({ourProps:R,theirProps:t,slot:y,attrs:o,slots:i,name:"ListboxButton"})}}}),je=B({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(t,{attrs:o,slots:i,expose:s}){let e=j("ListboxOptions"),d=`headlessui-listbox-options-${M()}`,c=_(null);s({el:e.optionsRef,$el:e.optionsRef});function h(l){switch(c.value&&clearTimeout(c.value),l.key){case x.Space:if(e.searchQuery.value!=="")return l.preventDefault(),l.stopPropagation(),e.search(l.key);case x.Enter:if(l.preventDefault(),l.stopPropagation(),e.activeOptionIndex.value!==null){let a=e.options.value[e.activeOptionIndex.value];e.select(a.dataRef.value)}e.mode.value===0&&(e.closeListbox(),I(()=>{var a;return(a=O(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})}));break;case D(e.orientation.value,{vertical:x.ArrowDown,horizontal:x.ArrowRight}):return l.preventDefault(),l.stopPropagation(),e.goToOption(V.Next);case D(e.orientation.value,{vertical:x.ArrowUp,horizontal:x.ArrowLeft}):return l.preventDefault(),l.stopPropagation(),e.goToOption(V.Previous);case x.Home:case x.PageUp:return l.preventDefault(),l.stopPropagation(),e.goToOption(V.First);case x.End:case x.PageDown:return l.preventDefault(),l.stopPropagation(),e.goToOption(V.Last);case x.Escape:l.preventDefault(),l.stopPropagation(),e.closeListbox(),I(()=>{var a;return(a=O(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})});break;case x.Tab:l.preventDefault(),l.stopPropagation();break;default:l.key.length===1&&(e.search(l.key),c.value=setTimeout(()=>e.clearSearch(),350));break}}m(h,"O");let p=we(),n=g(()=>p!==null?p.value===W.Open:e.listboxState.value===0);return()=>{var l,a,y,R;let P={open:e.listboxState.value===0},f={"aria-activedescendant":e.activeOptionIndex.value===null||(l=e.options.value[e.activeOptionIndex.value])==null?void 0:l.id,"aria-multiselectable":e.mode.value===1?!0:void 0,"aria-labelledby":(R=(a=O(e.labelRef))==null?void 0:a.id)!=null?R:(y=O(e.buttonRef))==null?void 0:y.id,"aria-orientation":e.orientation.value,id:d,onKeydown:h,role:"listbox",tabIndex:0,ref:e.optionsRef};return N({ourProps:f,theirProps:t,slot:P,attrs:o,slots:i,features:Y.RenderStrategy|Y.Static,visible:n.value,name:"ListboxOptions"})}}}),Ee=B({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(t,{slots:o,attrs:i,expose:s}){let e=j("ListboxOption"),d=`headlessui-listbox-option-${M()}`,c=_(null);s({el:c,$el:c});let h=g(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===d:!1),p=g(()=>D(e.mode.value,{[0]:()=>e.compare(k(e.value.value),k(t.value)),[1]:()=>k(e.value.value).some(f=>e.compare(k(f),k(t.value)))})),n=g(()=>D(e.mode.value,{[1]:()=>{var f;let S=k(e.value.value);return((f=e.options.value.find(u=>S.some(r=>e.compare(k(r),k(u.dataRef.value)))))==null?void 0:f.id)===d},[0]:()=>p.value})),l=g(()=>({disabled:t.disabled,value:t.value,textValue:"",domRef:c}));U(()=>{var f,S;let u=(S=(f=O(c))==null?void 0:f.textContent)==null?void 0:S.toLowerCase().trim();u!==void 0&&(l.value.textValue=u)}),U(()=>e.registerOption(d,l)),re(()=>e.unregisterOption(d)),U(()=>{de([e.listboxState,p],()=>{e.listboxState.value===0&&(!p.value||D(e.mode.value,{[1]:()=>{n.value&&e.goToOption(V.Specific,d)},[0]:()=>{e.goToOption(V.Specific,d)}}))},{immediate:!0})}),ve(()=>{e.listboxState.value===0&&(!h.value||e.activationTrigger.value!==0&&I(()=>{var f,S;return(S=(f=O(c))==null?void 0:f.scrollIntoView)==null?void 0:S.call(f,{block:"nearest"})}))});function a(f){if(t.disabled)return f.preventDefault();e.select(t.value),e.mode.value===0&&(e.closeListbox(),I(()=>{var S;return(S=O(e.buttonRef))==null?void 0:S.focus({preventScroll:!0})}))}m(a,"i");function y(){if(t.disabled)return e.goToOption(V.Nothing);e.goToOption(V.Specific,d)}m(y,"k");function R(){t.disabled||h.value||e.goToOption(V.Specific,d,0)}m(R,"h");function P(){t.disabled||!h.value||e.goToOption(V.Nothing)}return m(P,"w$1"),()=>{let{disabled:f}=t,S={active:h.value,selected:p.value,disabled:f},u={id:d,ref:c,role:"option",tabIndex:f===!0?void 0:-1,"aria-disabled":f===!0?!0:void 0,"aria-selected":p.value,disabled:void 0,onClick:a,onFocus:y,onPointermove:R,onMousemove:R,onPointerleave:P,onMouseleave:P};return N({ourProps:u,theirProps:ee(t,["value","disabled"]),slot:S,attrs:i,slots:o,name:"ListboxOption"})}}});const ze={key:0},He=B({__name:"RwSelect",props:{modelValue:null,items:{default:()=>[]},itemValue:{default:void 0},itemTitle:{default:void 0},disabledItems:{default:()=>[]},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:o}){const i=t,s=Se(i,"modelValue",o),e=m(n=>l=>l===void 0?n:n[l],"getProp"),d=g(()=>i.items.map((n,l)=>{const a=i.itemValue instanceof Function?i.itemValue(n):e(n)(i.itemValue),y=i.itemTitle instanceof Function?i.itemTitle(n):e(n)(i.itemTitle);return{item:n,value:a,title:y,isSelected:a===s.value,isDisabled:Boolean(i.disabledItems[l])}})),c=g(()=>s.value===null?null:d.value.find(n=>n.isSelected)),h=g(()=>{var n;return((n=c.value)==null?void 0:n.title)||null}),p=g(()=>{var n;return((n=c.value)==null?void 0:n.item)||null});return(n,l)=>(F(),E(w(Ne),{class:"rw-select",modelValue:w(s),"onUpdate:modelValue":l[0]||(l[0]=a=>ge(s)?s.value=a:null),multiple:t.multiple,disabled:t.disabled,as:"div"},{default:q(({open:a})=>[T(n.$slots,"labelSlot",A(H({open:a,disabled:t.disabled})),()=>[$(w(qe),{class:z(["rw-select__label",{"rw-select__label__open":a,"rw-select__label__disabled":t.disabled}])},{default:q(()=>[T(n.$slots,"default"),K(),t.required?(F(),G("span",ze," * ")):ce("",!0)]),_:2},1032,["class"])]),T(n.$slots,"activatorSlot",A(H({value:w(s),item:w(p),open:a})),()=>[$(w(Ae),{class:z(["rw-select__button",{"rw-select__button__active":a}])},{default:q(()=>[w(h)?T(n.$slots,"selectedSlot",A(fe({key:0},{value:w(s),item:w(p),open:a})),()=>[K(J(w(h)),1)]):T(n.$slots,"placeholderSlot",{key:1}),T(n.$slots,"iconSlot",A(H({value:w(s),item:w(p),open:a})),()=>[a?(F(),E(X,{key:1,name:"mdi:chevron-up"})):(F(),E(X,{key:0,name:"mdi:chevron-down"}))])]),_:2},1032,["class"])]),be($(w(je),{static:"",class:z(["rw-select__list",{"rw-select__list__active":a}])},{default:q(()=>[(F(!0),G(Z,null,me(w(d),(y,R)=>(F(),E(w(Ee),{class:z(["rw-select__list-item",{"rw-select__list-item__focused":n.active,"rw-select__list-item__selected":n.selected,"rw-select__list-item__disabled":t.disabled}]),key:R,value:y.value,disabled:y.isDisabled},{default:q(({active:P,selected:f})=>[T(n.$slots,"itemSlot",A(H({item:y.item,active:P,selected:f,disabled:t.disabled})),()=>[K(J(y.title),1)])]),_:2},1032,["class","value","disabled"]))),128))]),_:2},1032,["class"]),[[ye,a]])]),_:3},8,["modelValue","multiple","disabled"]))}});He.__docgenInfo={exportName:"default",displayName:"RwSelect",description:"",tags:{},props:[{name:"modelValue",required:!0,type:{name:"any"}},{name:"items",required:!1,type:{name:"Array",elements:[{name:"any"}]},defaultValue:{func:!1,value:"() => []"}},{name:"itemValue",required:!1,type:{name:"union",elements:[{name:"string"},{name:"ParseFunction"}]},defaultValue:{func:!1,value:"undefined"}},{name:"itemTitle",required:!1,type:{name:"union",elements:[{name:"string"},{name:"ParseFunction"}]},defaultValue:{func:!1,value:"undefined"}},{name:"disabledItems",required:!1,type:{name:"Array",elements:[{name:"number"}]},defaultValue:{func:!1,value:"() => []"}},{name:"multiple",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"disabled",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"required",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"update:modelValue",type:{names:["unknown"]}}],slots:[{name:"labelSlot",scoped:!0,bindings:[{name:"open",title:"binding"},{name:"disabled",title:"binding"}]},{name:"default"},{name:"activatorSlot",scoped:!0,bindings:[{name:"value",title:"binding"},{name:"item",title:"binding"},{name:"open",title:"binding"}]},{name:"selectedSlot",scoped:!0,bindings:[{name:"value",title:"binding"},{name:"item",title:"binding"},{name:"open",title:"binding"}]},{name:"placeholderSlot"},{name:"iconSlot",scoped:!0,bindings:[{name:"value",title:"binding"},{name:"item",title:"binding"},{name:"open",title:"binding"}]},{name:"itemSlot",scoped:!0,bindings:[{name:"item",title:"binding"},{name:"active",title:"binding"},{name:"selected",title:"binding"},{name:"disabled",title:"binding"}]}]};export{He as default};
//# sourceMappingURL=RwSelect.4dd50c30.js.map
